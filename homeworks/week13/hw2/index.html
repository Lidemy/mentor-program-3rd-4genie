<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hw2: Todo List</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <link rel="stylesheet" href="https://bootswatch.com/4/minty/bootstrap.css"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script>
    $(document).ready(function(){
      // 新增todo
      // 監測新增按鈕，若按下新增的按鈕，則將待辦事項的input 內容新增到 ul 的 list 中
      $('.add-newTodo-btn').click(function(){
        let value = $('.new-todo').val();
        // console.log(value);
        $('.new-todo').val("");
        $('.list-group').append(`
          <li class="list-group-item d-flex justify-content-between align-items-center todo-item">
              <div>
                <span class="badge badge-secondary mr-2">未完成</span>${value}
              </div>
              <div>
                <button type="button" class="btn btn-info btn-mark">已完成</button>
                <i class="btn btn-danger delete-todo material-icons" aria-hidden="true">delete</i>
              </div>
            </li>  
        `)
      })

      //刪除 todo
      $('.todo-list').on('click','.delete-todo',function(e){
        $(e.target).parents('.todo-item').remove();
      })

      // 標示已完成與未完成
      $('.todo-list').on('click', '.btn-mark', function (e) {
        const markBtn = $(e.target);
        const markBtnSibling = markBtn.parents('.todo-item').children()[0];
        const badge = $('span', markBtnSibling);

        if(markBtn.hasClass('todo-undone')){
          markBtn.removeClass('todo-undone');
          markBtn.removeClass('btn-secondary');
          markBtn.addClass('todo-success');
          markBtn.addClass('btn-info');
          markBtn.text('已完成');

          badge.removeClass('badge-info');
          badge.addClass('badge-secondary');
          badge.text('未完成');
        }else{
          markBtn.removeClass('todo-done');
          markBtn.removeClass('btn-info');
          markBtn.addClass('todo-undone');
          markBtn.addClass('btn-secondary');
          markBtn.text('未完成')

          badge.removeClass('badge-secondary');
          badge.addClass('badge-info');
          badge.text('已完成');
        }
      })
    })
  </script>
  <style>
    .checked{
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="row mt-4">
      <div class="col-12">
        <div class="alert alert-info" role="alert">
          我的每日待辦清單
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="input-group">
          <input type="text" class="form-control new-todo" placeholder="輸入待辦事項">
          <div class="input-group-append">
            <button class="btn btn-outline-info add-newTodo-btn mb-3 " type="button" id="button-add-todo" style="width: 9.8rem">新增</button>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="card">
          <ul class="list-group list-group-flush todo-list">
            <li class="list-group-item d-flex justify-content-between align-items-center todo-item">
              <div>
                <span class="badge badge-info mr-2">已完成</span>吃早餐
              </div>
              <div>
                <button type="button" class="btn btn-secondary btn-mark todo-undone">未完成</button>
                <i class="btn btn-danger delete-todo material-icons" aria-hidden="true">delete</i>
              </div>
            </li>  
          <li class="list-group-item d-flex justify-content-between align-items-center todo-item">
            <div>
              <span class="badge badge-secondary mr-2 ">未完成</span>整理房間
            </div>
            <div>
              <button type="button" class="btn btn-info btn-mark">已完成</button>
              <i class="btn btn-danger delete-todo material-icons" aria-hidden="true">delete</i>
            </div>
          </li>
            <li class="list-group-item d-flex justify-content-between align-items-center todo-item">
              <div>
                <span class="badge badge-secondary mr-2">未完成</span>寫作業
              </div>
              <div>
                <button type="button" class="btn btn-info btn-mark">已完成</button>
                <i class="btn btn-danger delete-todo material-icons" aria-hidden="true">delete</i>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- JS, Popper.js, and jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</body>
</html>